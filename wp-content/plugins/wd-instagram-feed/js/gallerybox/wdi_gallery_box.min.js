var isPopUpOpened=false;function wdi_spider_createpopup(d,c,f,b,h,g,a,e){d=d.replace(/&#038;/g,"&");if(isPopUpOpened){return}isPopUpOpened=true;if(wdi_spider_hasalreadyreceivedpopup(g)||wdi_spider_isunsupporteduseragent()){return}jQuery("html").attr("style","overflow:hidden !important;");jQuery("#wdi_spider_popup_loading_"+c).css({display:"block"});jQuery("#wdi_spider_popup_overlay_"+c).css({display:"block"});jQuery.ajax({type:"POST",url:d,dataType:"text",data:{action:"WDIGalleryBox",image_rows:JSON.stringify(e.parsedData),feed_id:e.feed_row.id,feed_counter:e.feed_row.wdi_feed_counter},success:function(k){var j=jQuery('<div id="wdi_spider_popup_wrap" class="wdi_spider_popup_wrap" style=" width:'+f+"px; height:"+b+"px; margin-top:-"+b/2+"px; margin-left: -"+f/2+'px; ">'+k+"</div>").hide().appendTo("body");wdi_spider_showpopup(g,a,j,h);jQuery("#wdi_spider_popup_loading_"+c).css({display:"none !important;"})}})}function wdi_spider_showpopup(c,a,b,d){isPopUpOpened=true;b.show();wdi_spider_receivedpopup(c,a)}function wdi_spider_hasalreadyreceivedpopup(a){if(document.cookie.indexOf(a)>-1){delete document.cookie[document.cookie.indexOf(a)]}return false}function wdi_spider_receivedpopup(c,a){var b=new Date();b.setDate(b.getDate()+a);document.cookie=c+"=true;expires="+b.toUTCString()+";path=/"}function wdi_spider_isunsupporteduseragent(){return(!window.XMLHttpRequest)}function wdi_spider_destroypopup(d){if(document.getElementById("wdi_spider_popup_wrap")!=null){wdi_comments_manager.popup_destroyed();if(typeof jQuery().fullscreen!=="undefined"&&jQuery.isFunction(jQuery().fullscreen)){if(jQuery.fullscreen.isFullScreen()){jQuery.fullscreen.exit()}}if(typeof enable_addthis!="undefined"&&enable_addthis){jQuery(".at4-share-outer").hide()}setTimeout(function(){jQuery(".wdi_spider_popup_wrap").remove();jQuery(".wdi_spider_popup_loading").css({display:"none"});jQuery(".wdi_spider_popup_overlay").css({display:"none"});jQuery(document).off("keydown");jQuery("html").attr("style","")},20)}isPopUpOpened=false;var a=(/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));var c=document.querySelector('meta[name="viewport"]');if(a&&c){c.content="width=device-width, initial-scale=1"}var b=jQuery(document).scrollTop();window.location.hash="";jQuery(document).scrollTop(b);if(typeof wdi_playInterval!="undefined"){clearInterval(wdi_playInterval)}}Object.size=function(c){var b=0,a;for(a in c){if(c.hasOwnProperty(a)){b++}}return b};function wdi_spider_ajax_save(a,b){wdi_comments_manager.init(b);return false}wdi_comments_manager={media_id:"",mediaComments:[],load_more_count:10,commentCounter:0,currentKey:-1,init:function(a){this.instagram=new WDIInstagram();this.instagram.addToken(wdi_front.access_token);if(this.currentKey!=a){this.currentKey=a;this.reset_comments()}else{}},reset_comments:function(){jQuery("#wdi_load_more_comments").remove();jQuery("#wdi_added_comments").html("");this.commentCounter=0;this.media_id=wdi_data[this.currentKey]["id"];this.getAjaxComments(this.currentKey)},popup_destroyed:function(){this.media_id="";this.mediaComments=[];this.commentCounter=0;this.currentKey=-1},showComments:function(f,e){if(Object.size(f)-this.commentCounter-e<0||e===undefined){e=Object.size(f)-this.commentCounter}var b=this.commentCounter;for(i=Object.size(f)-b-1;i>=Object.size(f)-b-e;i--){this.commentCounter++;var d=(f[i]["text"]);d=this.filterCommentText(d);var g=(f[i]["from"]["username"]);var c=(f[i]["from"]["profile_picture"]);var a=jQuery('<div class="wdi_single_comment"></div>');a.append(jQuery('<p class="wdi_comment_header_p"><span class="wdi_comment_header"><a target="_blank" href="//instagram.com/'+g+'"><img style="height:25px;width:25px;border-radius:25px" src="'+c+'">   '+g+'</a></span><span class="wdi_comment_date">'+wdi_front.convertUnixDate(f[i]["created_time"])+"</span></p>"));a.append(jQuery('<div class="wdi_comment_body_p"><span class="wdi_comment_body"><p>'+d+"</p></span></div>"));jQuery("#wdi_added_comments").prepend(a)}this.updateScrollbar()},updateScrollbar:function(){var b=jQuery("#wdi_comments");var a=jQuery("#wdi_added_comments");jQuery(".wdi_comments").attr("class","wdi_comments");jQuery(".wdi_comments").html("");jQuery(".wdi_comments").append(b);jQuery(".wdi_comments").append(a);if(typeof jQuery().mCustomScrollbar!=="undefined"){if(jQuery.isFunction(jQuery().mCustomScrollbar)){jQuery(".wdi_comments").mCustomScrollbar({scrollInertia:250})}}jQuery(".wdi_comments_close_btn").on("click",wdi_comment)},getAjaxComments:function(){this.instagram.getRecentMediaComments(this.media_id,{success:function(a){if(a==""||a==undefined||a==null){errorMessage="Network Error, please try again later :(";wdi_front.show_alert(errorMessage);return}if(a.meta["code"]!=200){errorMessage=a.meta["error_message"];wdi_front.show_alert(errorMessage);return}wdi_comments_manager.mediaComments=a.data;var b=wdi_data[wdi_comments_manager.currentKey];b.comments_data=a.data;wdi_comments_manager.showComments(b.comments_data,wdi_comments_manager.load_more_count);wdi_comments_manager.ajax_comments_ready(a.data)}})},ajax_comments_ready:function(a){this.createLoadMoreAndBindEvent()},createLoadMoreAndBindEvent:function(){jQuery("#wdi_added_comments").prepend(jQuery('<p id="wdi_load_more_comments" class="wdi_load_more_comments">load more comments</p>'));jQuery(".wdi_comment_container #wdi_load_more_comments").on("click",function(){jQuery(this).remove();wdi_comments_manager.showComments(wdi_comments_manager.mediaComments,wdi_comments_manager.load_more_count);wdi_comments_manager.createLoadMoreAndBindEvent()})},filterCommentText:function(d){var c=d.split(" ");var b="";for(var a=0;a<c.length;a++){switch(c[a][0]){case"@":b+='<a target="blank" class="wdi_comm_text_link" href="//instagram.com/'+c[a].substring(1,c[a].length)+'">'+c[a]+"</a> ";break;case"#":b+='<a target="blank" class="wdi_comm_text_link" href="//instagram.com/explore/tags/'+c[a].substring(1,c[a].length)+'">'+c[a]+"</a> ";break;default:b+=c[a]+" "}}b=b.substring(0,b.length-1);return b}};function wdi_spider_set_input_value(b,a){if(document.getElementById(b)){document.getElementById(b).value=a}}function wdi_spider_form_submit(b,a){if(document.getElementById(a)){document.getElementById(a).submit()}if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}}function wdi_spider_check_required(b,a){if(jQuery("#"+b).val()==""){wdi_front.show_alert(a+"* "+wdi_objectL10n.wdi_field_required);jQuery("#"+b).attr("style","border-color: #FF0000;");jQuery("#"+b).focus();return true}else{return false}}function wdi_spider_check_email(b){if(jQuery("#"+b).val()!=""){var a=jQuery("#"+b).val().replace(/^\s+|\s+$/g,"");if(a.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)==-1){wdi_front.show_alert(wdi_objectL10n.wdi_mail_validation);return true}return false}}function wdi_captcha_refresh(a){if(document.getElementById(a+"_img")&&document.getElementById(a+"_input")){srcArr=document.getElementById(a+"_img").src.split("&r=");document.getElementById(a+"_img").src=srcArr[0]+"&r="+Math.floor(Math.random()*100);document.getElementById(a+"_img").style.display="inline-block";document.getElementById(a+"_input").value=""}}function wdi_play_pause(d){var c=d.get(0);var b=/firefox/i;var a=false;if(navigator.userAgent.match(b)){a=true}if(!a){if(!c.paused){c.pause()}else{c.play()}}}function wdi_spider_display_embed(k,l,g){var b="";switch(k){case"EMBED_OEMBED_YOUTUBE_VIDEO":var h="<iframe ";if(l!=""){h+=' src="//www.youtube.com/embed/'+l+'?enablejsapi=1&wmode=transparent"'}for(attr in g){if(!(/src/i).test(attr)){if(attr!=""&&g[attr]!=""){h+=" "+attr+'="'+g[attr]+'"'}}}h+=" ></iframe>";b+=h;break;case"EMBED_OEMBED_VIMEO_VIDEO":var e="<iframe ";if(l!=""){e+=' src="//player.vimeo.com/video/'+l+'?enablejsapi=1"'}for(attr in g){if(!(/src/i).test(attr)){if(attr!=""&&g[attr]!=""){e+=" "+attr+'="'+g[attr]+'"'}}}e+=" ></iframe>";b+=e;break;case"EMBED_OEMBED_FLICKR_IMAGE":var c="<div ";for(attr in g){if(!(/src/i).test(attr)){if(attr!=""&&g[attr]!=""){c+=" "+attr+'="'+g[attr]+'"'}}}c+=" >";if(l!=""){c+='<img src="'+l+'" style="max-width:100% !important; max-height:100% !important; width:auto !important; height:auto !important;">'}c+="</div>";b+=c;break;case"EMBED_OEMBED_FLICKR_VIDEO":break;case"EMBED_OEMBED_INSTAGRAM_VIDEO":var d="<div ";for(attr in g){if(!(/src/i).test(attr)){if(attr!=""&&g[attr]!=""){d+=" "+attr+'="'+g[attr]+'"'}}}d+=" >";if(l!=""){d+='<video onclick="wdi_play_pause(jQuery(this));" style="width:auto !important; height:auto !important; max-width:100% !important; max-height:100% !important; margin:0 !important;" controls><source src="'+l+'" type="video/mp4"> Your browser does not support the video tag. </video>'}d+="</div>";b+=d;break;case"EMBED_OEMBED_INSTAGRAM_IMAGE":var d="<div ";for(attr in g){if(!(/src/i).test(attr)){if(attr!=""&&g[attr]!=""){d+=" "+attr+'="'+g[attr]+'"'}}}d+=" >";if(l!=""){d+='<img src="//instagram.com/p/'+l+'/media/?size=l" style=" max-width:100% !important; max-height:100% !important; width:auto; height:auto;">'}d+="</div>";b+=d;break;case"EMBED_OEMBED_INSTAGRAM_POST":var d="<div ";var a="";for(attr in g){if(!(/src/i).test(attr)){if(attr!=""&&g[attr]!=""){d+=" "+attr+'="'+g[attr]+'"';if(attr=="CLASS"||attr=="class"||attr=="Class"){obj_class=g[attr]}}}}d+=" >";if(l!=""){d+='<iframe class="inner_instagram_iframe_'+obj_class+'" src="//instagr.am/p/'+l+'/embed/?enablejsapi=1" style="max-width:100% !important; max-height:100% !important; width:100%; height:100%; margin:0; display:table-cell; vertical-align:middle;"frameborder="0" scrolling="no" allowtransparency="false" allowfullscreen></iframe>'}d+="</div>";b+=d;break;case"EMBED_OEMBED_DAILYMOTION_VIDEO":var j="<iframe ";if(l!=""){j+=' src="//www.dailymotion.com/embed/video/'+l+'?api=postMessage"'}for(attr in g){if(!(/src/i).test(attr)){if(attr!=""&&g[attr]!=""){j+=" "+attr+'="'+g[attr]+'"'}}}j+=" ></iframe>";b+=j;break;case"EMBED_OEMBED_IMGUR":var f="<div ";for(attr in g){if(!(/src/i).test(attr)){if(attr!=""&&g[attr]!=""){d+=" "+attr+'="'+g[attr]+'"'}}}f+=" >";if(l!=""){f+='<img src="'+l+'" style="max-width:100% !important; max-height:100% !important; width:auto; height:auto !important;">'}f+="</div>";b+=f;break;default:}return b};